### 查询扩展

#### 使用LIKE子句

使用LIKE可以用来配备通配符指定模式的文本值。

有两个通配符：

* %：代表0个、1个或多个数字或字符

* _：代表一个数字和字符

%和_可以组合使用。

下面是一个例子：

创建一个articles表，包含两列：title和content

```sql
CREATE TABLE IF NOT EXISTS articles (title TEXT, content TEXT);
```

插入一些数据

```sql
INSERT INTO articles (title, content) VALUES ('Door him meet others visit of message benefit.', 'Her world detail indeed reflect a century shake others never radio meeting detail reason see.');
INSERT INTO articles (title, content) VALUES ('Not catch hotel bag.', 'Seven focus allow suggest science management pattern need beautiful federal Mrs data instead.');
INSERT INTO articles (title, content) VALUES ('College security decade member garden whatever unit.', 'Former money fear medical college serve get star himself whom on bring community out once environment.');
INSERT INTO articles (title, content) VALUES ('Five up poor article off find thought second.', 'Where language condition worker enough keep certain reason attorney air daughter start laugh character time north recently until no.');
INSERT INTO articles (title, content) VALUES ('Experience mind capital newspaper cold way behind.', 'Out court require pressure effect loss from note great green food south military after me next name rock high community visit successful role.');
INSERT INTO articles (title, content) VALUES ('Between director know manager.', 'Believe under instead she model main would area care eye detail third specific yes guess tonight benefit though.');
INSERT INTO articles (title, content) VALUES ('Thus power rate writer manage if.', 'Possible lead candidate possible you body after factor east Congress herself television official boy laugh break.');
INSERT INTO articles (title, content) VALUES ('Occur behind present foreign because despite campaign.', 'If pattern discover fight bad firm fish minute marriage available computer wonder.');
INSERT INTO articles (title, content) VALUES ('Son usually pressure compare purpose.', 'Recent help tough wear control think five two study describe accept exactly agree officer.');
INSERT INTO articles (title, content) VALUES ('Reveal budget lot role old house.', 'Performance why whose over food put front until spend green someone hear issue health art local a.');
```

查询

```sql
SELECT * FROM articles WHERE content LIKE '%five%'; -- 查找content中包含five的数据
SELECT * FROM articles WHERE content LIKE '%self%'; -- 查找content中包含self的数据
SELECT * FROM articles WHERE content LIKE '%h__self%'; -- 查找长度为7，以h为开头，以self为结尾的数据
```

#### 向量相似度查询

将向量按照相似度（距离）排序。

下面是一个例子：

创建vectors表以存储向量，并插入一些4维的int8向量

```sql
CREATE TABLE vectors (
    id INTEGER PRIMARY KEY,
    vector BLOB
);

INSERT INTO vectors (vector) VALUES
    (vec_int8('[1, 2, 3, 4]')),
    (vec_int8('[5, 6, 7, 8]')),
    (vec_int8('[1, 1, 1, 1]')),
    (vec_int8('[2, 2, 2, 2]')),
    (vec_int8('[4, 3, 2, 1]')),
    (vec_int8('[8, 7, 6, 5]'));
```

查询和向量[1, 1, 1, 1]相似度最高的两个向量

> distance是数据库中每个向量与[1, 1, 1, 1]的欧式距离，是排序的依据。``LIMIT 2``限制了只输出两条数据。

```sql
SELECT
    id,
    vec_to_json(vec_int8(vector)),
    vec_distance_L2(vec_int8(vector), vec_int8('[1, 1, 1, 1]')) AS distance
FROM vectors
ORDER BY distance
LIMIT 2;
```